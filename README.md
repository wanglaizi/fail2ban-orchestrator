# ğŸ›¡ï¸ åˆ†å¸ƒå¼Nginxæ—¥å¿—ç›‘æ§ä¸Fail2banå°ç¦ç³»ç»Ÿ

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Linux-lightgrey.svg)]()

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºå¤šå°æœåŠ¡å™¨çš„**åˆ†å¸ƒå¼Nginxæ—¥å¿—ç›‘æ§å’ŒåŠ¨æ€IPå°ç¦ç³»ç»Ÿ**ï¼Œä¸“ä¸ºä¸‰ç½‘ï¼ˆç”µä¿¡ã€è”é€šã€ç§»åŠ¨ï¼‰å’Œæµ·å¤–ä¸»æœºç¯å¢ƒè®¾è®¡ï¼Œæ”¯æŒCentOSå’ŒUbuntuæ“ä½œç³»ç»Ÿã€‚ç³»ç»Ÿé€šè¿‡å®æ—¶åˆ†æNginxè®¿é—®æ—¥å¿—ï¼Œè‡ªåŠ¨è¯†åˆ«æ¶æ„æ”»å‡»è¡Œä¸ºï¼Œå¹¶åˆ©ç”¨Fail2banåœ¨å¤šä¸ªèŠ‚ç‚¹é—´åè°ƒæ‰§è¡ŒIPå°ç¦æ“ä½œã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- ğŸŒ **åˆ†å¸ƒå¼æ¶æ„**: æ”¯æŒå¤šå°æœåŠ¡å™¨ååŒå·¥ä½œï¼Œé€‚é…ä¸‰ç½‘å’Œæµ·å¤–éƒ¨ç½²
- âš¡ **å®æ—¶ç›‘æ§**: åŸºäºæ–‡ä»¶ç›‘æ§çš„æ¯«ç§’çº§æ—¥å¿—åˆ†æ
- ğŸ§  **æ™ºèƒ½åˆ†æ**: å¤šç§æ”»å‡»æ¨¡å¼è¯†åˆ«ï¼ˆSQLæ³¨å…¥ã€XSSã€è·¯å¾„éå†ã€å‘½ä»¤æ³¨å…¥ç­‰ï¼‰
- ğŸ¯ **åŠ¨æ€å°ç¦**: åŸºäºé£é™©è¯„åˆ†å’Œæœºå™¨å­¦ä¹ çš„è‡ªåŠ¨å°ç¦å†³ç­–
- ğŸ“Š **Webç•Œé¢**: ç°ä»£åŒ–çš„ç®¡ç†å’Œç›‘æ§ä»ªè¡¨æ¿
- ğŸ”„ **é«˜å¯ç”¨æ€§**: æ”¯æŒèŠ‚ç‚¹æ•…éšœæ¢å¤å’Œè´Ÿè½½å‡è¡¡
- ğŸ“± **å¤šæ¸ é“é€šçŸ¥**: æ”¯æŒé‚®ä»¶ã€é’‰é’‰ã€å¾®ä¿¡ã€Slackç­‰é€šçŸ¥æ–¹å¼
- ğŸ” **å®‰å…¨åŠ å›º**: APIå¯†é’¥è®¤è¯ã€è¯·æ±‚é™æµã€æ•°æ®åŠ å¯†
- ğŸš€ **å¢å¼ºåŠŸèƒ½**: å¤šç§Ÿæˆ·ç®¡ç†ã€æ™ºèƒ½å‘Šè­¦ã€æ€§èƒ½ç›‘æ§ã€å®‰å…¨å®¡è®¡ã€MLæ”»å‡»æ£€æµ‹

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

- **ä¸­å¤®æ§åˆ¶èŠ‚ç‚¹**: è´Ÿè´£æ—¥å¿—åˆ†æã€æ”»å‡»æ£€æµ‹å’Œå°ç¦åè°ƒ
- **å¢å¼ºåŠŸèƒ½å±‚**: æä¾›å¤šç§Ÿæˆ·ç®¡ç†ã€æ™ºèƒ½å‘Šè­¦ã€æ€§èƒ½ç›‘æ§ã€MLæ£€æµ‹ç­‰é«˜çº§åŠŸèƒ½
- **æ—¥å¿—æ”¶é›†ä»£ç†**: å®æ—¶ç›‘æ§å„æœåŠ¡å™¨çš„Nginxæ—¥å¿—
- **å°ç¦æ‰§è¡ŒèŠ‚ç‚¹**: æ‰§è¡Œå…·ä½“çš„IPå°ç¦æ“ä½œ
- **Webç®¡ç†ç•Œé¢**: æä¾›å¯è§†åŒ–ç›‘æ§å’Œç®¡ç†åŠŸèƒ½

### æ¶æ„å›¾

![ç³»ç»Ÿæ¶æ„å›¾](docs/architecture.svg)

ç³»ç»Ÿæ”¯æŒä¸‰ç½‘ç¯å¢ƒï¼ˆç”µä¿¡ã€è”é€šã€ç§»åŠ¨ï¼‰å’Œæµ·å¤–ç¯å¢ƒçš„åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œé€šè¿‡ä¸­å¤®æ§åˆ¶èŠ‚ç‚¹åè°ƒå„ä¸ªä»£ç†å’Œæ‰§è¡ŒèŠ‚ç‚¹ï¼Œå®ç°æ™ºèƒ½åŒ–çš„æ”»å‡»æ£€æµ‹å’Œå°ç¦ç®¡ç†ã€‚

> ğŸ“– è¯¦ç»†çš„ç³»ç»Ÿæ¶æ„å›¾å’Œç»„ä»¶è¯´æ˜è¯·å‚è€ƒ [ç”¨æˆ·æ‰‹å†Œ](docs/USER_GUIDE.md#ç³»ç»Ÿæ¶æ„)

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **ç¼–ç¨‹è¯­è¨€**: Python 3.7+
- **Webæ¡†æ¶**: FastAPI + Uvicorn
- **æ•°æ®å­˜å‚¨**: Redis + MongoDB
- **å°ç¦å·¥å…·**: Fail2ban
- **WebæœåŠ¡å™¨**: Nginx
- **æ“ä½œç³»ç»Ÿ**: CentOS 7/8, Ubuntu 18.04+

> ğŸ“– è¯¦ç»†çš„æŠ€æœ¯è¦æ±‚å’Œç‰ˆæœ¬ä¿¡æ¯è¯·å‚è€ƒ [ç”¨æˆ·æ‰‹å†Œ](docs/USER_GUIDE.md#ç³»ç»Ÿè¦æ±‚)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (CentOS 7/8 æˆ– Ubuntu 18.04+)
- **Pythonç‰ˆæœ¬**: 3.7+
- **æƒé™è¦æ±‚**: Rootæƒé™
- **å†…å­˜è¦æ±‚**: è‡³å°‘2GB RAM

### ğŸ“¦ ä¸€é”®å®‰è£…

```bash
# ä¸‹è½½å¹¶è¿è¡Œå®‰è£…è„šæœ¬
wget https://github.com/wanglaizi/fail2ban-orchestrator/archive/main.zip
unzip main.zip && cd fail2ban-distributed-main
chmod +x install.sh && sudo ./install.sh
```

å®‰è£…è„šæœ¬æ”¯æŒä»¥ä¸‹æ¨¡å¼ï¼š
- **[1] ä¸­å¤®æ§åˆ¶èŠ‚ç‚¹** - ä¸»æ§æœåŠ¡å™¨
- **[2] æ—¥å¿—æ”¶é›†ä»£ç†** - ç›‘æ§æœåŠ¡å™¨
- **[3] å°ç¦æ‰§è¡ŒèŠ‚ç‚¹** - æ‰§è¡ŒæœåŠ¡å™¨
- **[4] å®Œæ•´ç³»ç»Ÿ** - å•æœºéƒ¨ç½²ï¼ˆæ¨èï¼‰

### âš™ï¸ æ‰‹åŠ¨å®‰è£…

```bash
# å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# ç”Ÿæˆé…ç½®æ–‡ä»¶
python3 main.py --init-config

# å¯åŠ¨ç³»ç»Ÿ
python3 main.py --mode all
```

> ğŸ“– è¯¦ç»†çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤è¯·å‚è€ƒ [ç”¨æˆ·æ‰‹å†Œ](docs/USER_GUIDE.md#å®‰è£…éƒ¨ç½²)

### ğŸ”§ é…ç½®è¯´æ˜

ç³»ç»Ÿæ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼å’Œé…ç½®é€‰é¡¹ï¼š

```yaml
# åŸºç¡€é…ç½®ç¤ºä¾‹
system:
  mode: "all"  # central, agent, executor, enhanced, all
  log_level: "INFO"

# å¢å¼ºåŠŸèƒ½é…ç½®
enhancements:
  enabled: true  # å¯ç”¨å¢å¼ºåŠŸèƒ½
  multi_tenancy:
    enabled: true
  intelligent_alerting:
    enabled: true
```

> ğŸ“– å®Œæ•´çš„é…ç½®è¯´æ˜è¯·å‚è€ƒ [é›†æˆæŒ‡å—](INTEGRATION_GUIDE.md) å’Œ [ç”¨æˆ·æ‰‹å†Œ](docs/USER_GUIDE.md#é…ç½®è¯´æ˜)

### ğŸŒ è®¿é—®Webç•Œé¢

å®‰è£…å®Œæˆåï¼Œè®¿é—®Webç®¡ç†ç•Œé¢ï¼š

- **URL**: `http://your-server-ip:8080`
- **é»˜è®¤è´¦æˆ·**: admin / admin123 (å¯åœ¨é…ç½®ä¸­ä¿®æ”¹)

## ğŸ“– æ–‡æ¡£å¯¼èˆª

- ğŸ“š **[ç”¨æˆ·æ‰‹å†Œ](docs/USER_GUIDE.md)** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œé…ç½®è¯´æ˜
- ğŸ”Œ **[APIæ–‡æ¡£](docs/API.md)** - RESTful APIæ¥å£æ–‡æ¡£
- ğŸš€ **[é›†æˆæŒ‡å—](INTEGRATION_GUIDE.md)** - å¢å¼ºåŠŸèƒ½é›†æˆå’Œä½¿ç”¨
- âš¡ **[å¿«é€Ÿå¼€å§‹](enhancements/QUICKSTART.md)** - å¢å¼ºåŠŸèƒ½å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ¯ è¿è¡Œæ¨¡å¼

ç³»ç»Ÿæ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒçš„éƒ¨ç½²éœ€æ±‚ï¼š

| æ¨¡å¼ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `central` | ä¸­å¤®æ§åˆ¶æœåŠ¡å™¨ | ä¸»æ§èŠ‚ç‚¹éƒ¨ç½² |
| `agent` | æ—¥å¿—æ”¶é›†ä»£ç† | ç›‘æ§èŠ‚ç‚¹éƒ¨ç½² |
| `executor` | å°ç¦æ‰§è¡ŒèŠ‚ç‚¹ | æ‰§è¡ŒèŠ‚ç‚¹éƒ¨ç½² |
| `enhanced` | å¢å¼ºåŠŸèƒ½æ¨¡å— | é«˜çº§åŠŸèƒ½éƒ¨ç½² |
| `all` | å®Œæ•´ç³»ç»Ÿ | å•æœºéƒ¨ç½²ï¼ˆæ¨èï¼‰ |

```bash
# å¯åŠ¨ä¸åŒæ¨¡å¼
python3 main.py --mode central    # ä¸­å¤®æ§åˆ¶
python3 main.py --mode enhanced   # å¢å¼ºåŠŸèƒ½
python3 main.py --mode all        # å®Œæ•´ç³»ç»Ÿ
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
fail2ban-distributed/
â”œâ”€â”€ ğŸ“„ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ âš™ï¸ config.example.yaml     # é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ ğŸ“‹ requirements.txt        # Pythonä¾èµ–æ¸…å•
â”œâ”€â”€ ğŸš€ install.sh             # ä¸€é”®å®‰è£…è„šæœ¬
â”œâ”€â”€ ğŸ¢ central/               # ä¸­å¤®æ§åˆ¶èŠ‚ç‚¹
â”œâ”€â”€ ğŸ¤– agents/                # æ—¥å¿—æ”¶é›†ä»£ç†
â”œâ”€â”€ ğŸ› ï¸ utils/                 # å·¥å…·æ¨¡å—
â”œâ”€â”€ ğŸ” analysis/              # æ™ºèƒ½åˆ†ææ¨¡å—
â”œâ”€â”€ ğŸ“¢ notifications/         # é€šçŸ¥æ¨é€æ¨¡å—
â”œâ”€â”€ ğŸŒ web/                   # Webç®¡ç†ç•Œé¢
â”œâ”€â”€ ğŸš€ enhancements/          # å¢å¼ºåŠŸèƒ½æ¨¡å—
â””â”€â”€ ğŸ“– docs/                  # æ–‡æ¡£ç›®å½•
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

- ğŸ› **æŠ¥å‘Šé—®é¢˜**: åœ¨GitHubä¸Šåˆ›å»ºIssue
- ğŸ’¡ **åŠŸèƒ½å»ºè®®**: åœ¨GitHub Discussionsä¸­è®¨è®º
- ğŸ”§ **ä»£ç è´¡çŒ®**: Forké¡¹ç›®å¹¶æäº¤Pull Request

> ğŸ“– è¯¦ç»†çš„è´¡çŒ®æŒ‡å—è¯·å‚è€ƒ [ç”¨æˆ·æ‰‹å†Œ](docs/USER_GUIDE.md#è´¡çŒ®æŒ‡å—)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Fail2ban](https://www.fail2ban.org/) - å¼ºå¤§çš„å…¥ä¾µé˜²æŠ¤å·¥å…·
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„Python Webæ¡†æ¶
- [Redis](https://redis.io/) - é«˜æ€§èƒ½å†…å­˜æ•°æ®åº“
- [MongoDB](https://www.mongodb.com/) - çµæ´»çš„æ–‡æ¡£æ•°æ®åº“
- [Nginx](https://nginx.org/) - é«˜æ€§èƒ½WebæœåŠ¡å™¨

---

<div align="center">
  <p>å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª â­ Starï¼</p>
  <p>Made with â¤ï¸ by the Fail2ban Distributed Team</p>
</div>

## è®¸å¯è¯

MIT License